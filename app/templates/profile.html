<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Profile - Mental Health Project</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    {% include 'header.html' %}

    <section class="login-section"> <!-- You can rename this class if needed for consistency -->
        <img src="{{ url_for('static', filename='images/profile.svg') }}" class="login-image">

        <div class="login-container">
            <h2>Update Your Profile</h2>

            <!-- Flash Messages -->
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="alert-container">
                        {% for category, message in messages %}
                            <div class="alert alert-{{ category }}">
                                {{ message }}
                            </div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}

            <!-- Profile Form -->
            <form method="POST" action="{{ url_for('main.profile') }}">
                {{ form.hidden_tag() }}

                <label for="name">{{ form.name.label }}</label>
                {{ form.name(class="form-control", placeholder="Full Name") }}
                {% if form.name.errors %}
                    <ul class="text-danger">
                        {% for error in form.name.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                <label for="email">{{ form.email.label }}</label>
                {{ form.email(class="form-control", placeholder="Email Address") }}
                {% if form.email.errors %}
                    <ul class="text-danger">
                        {% for error in form.email.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                <label for="preferences">{{ form.preferences.label }}</label>
                {{ form.preferences(class="form-control", placeholder="Your preferences...", rows="4") }}
                {% if form.preferences.errors %}
                    <ul class="text-danger">
                        {% for error in form.preferences.errors %}
                            <li>{{ error }}</li>
                        {% endfor %}
                    </ul>
                {% endif %}

                <button type="submit" class="login-button">Update Profile</button>
            </form>

            <!-- Change Password Link -->
            <p class="mt-3">
                Want to change your password?
                <a href="{{ url_for('main.change_password') }}" class="text-warning">Change Password</a>
            </p>
        </div>
    </section>

    {% include 'footer.html' %}
</body>
</html>